
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Databases partitionning &#8212; Centreon 2.8.16 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User guide" href="user/index.html" />
    <link rel="prev" title="Backup" href="../backup.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="user/index.html" title="User guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../backup.html" title="Backup"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Centreon 2.8.16 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Administration</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="databases-partitionning">
<span id="centreon-partitioning"></span><h1>Databases partitionning<a class="headerlink" href="#databases-partitionning" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Centreon Partioning module is integrated to Centreon Web, features and advantages are:</p>
<ul class="simple">
<li>It allows you to partition MySQL table according to data date. Giving optimization of request execution time.</li>
<li>Data purge is improved, it’s now just needed to delete old partitions.</li>
<li>Extent of Mysql crash are limited. Only needed to rebuild concerned partitions.</li>
<li>Existent partitions can be partitionned</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are some limitations:
- Maximum number of partitions (for a MySQL table) is 1024
- Foreign keys are not supported</p>
</div>
<p>Since Centreon Web 2.8.0 version, tables logs, data_bin, log_archive_host and log_archive_service are partioned during installation.</p>
<p>More details about MySQL partitioning <a class="reference external" href="http://dev.mysql.com/doc/refman/5.5/en/partitioning.html">here</a>.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>The following packages are required:</p>
<ul class="simple">
<li>php-mysql</li>
<li>Pear-DB</li>
<li>MySQL (&gt;= 5.1.x)</li>
</ul>
<p>MySQL open_files_limit parameter must be set to 32000 in [server] section :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">server</span><span class="p">]</span>
<span class="n">open_files_limit</span> <span class="o">=</span> <span class="mi">32000</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you install Centreon via the dedicated ISO, this parameter is already configured. If you do it on your RedHat or CentOS linux version, you will be able to do it manualy.
Don’t forget to restart mysql / mariadb processus if you change this value in my.cnf.</p>
</div>
<p>If you use systemd, you need to create file “/etc/systemd/system/mariadb.service.d/mariadb.conf” :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Service</span><span class="p">]</span>
<span class="n">LimitNOFILE</span><span class="o">=</span><span class="mi">32000</span>
</pre></div>
</div>
<p>Then reload systemd and MySQL :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ systemctl daemon-reload
$ systemctl restart mysql
</pre></div>
</div>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/index.html">User guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/exploitation.html">Exploitation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/monitoring.html">Monitoring</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Databases partitionning</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../backup.html"
                        title="previous chapter">Backup</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="user/index.html"
                        title="next chapter">User guide</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/administration_guide/partitioning/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="user/index.html" title="User guide"
             >next</a> |</li>
        <li class="right" >
          <a href="../backup.html" title="Backup"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Centreon 2.8.16 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Administration</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2018 Centreon.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>From Packages &#8212; Centreon 2.8.16 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="From sources" href="from_sources.html" />
    <link rel="prev" title="Upgrade" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="from_sources.html" title="From sources"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Upgrade"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Centreon 2.8.16 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Upgrade</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="from-packages">
<span id="upgrade-from-packages"></span><h1>From Packages<a class="headerlink" href="#from-packages" title="Permalink to this headline">¶</a></h1>
<p>Centreon 3.4 includes Centreon Web 2.8, Centreon Engine 1.8, Centreon Broker 3.0.
It comes in two operating system flavors, either CentOS 6 or CentOS 7.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If your centreon contains the centreon knowlegdebase module (AKA Centreon KB),
please first uninstall the module (from the web) in order to avoid upgrade problem.
Centreon KB is now embedded into Centreon since the version 2.8.0.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>The prerequisites for Centreon Web 2.8 have evolved. It is strongly recommended
to follow the instructions to set up your platform.</p>
<p><strong>Centreon advises you to use MariaDB</strong> instead of MySQL.</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Software</th>
<th class="head">Version</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MariaDB</td>
<td>&gt;= 5.5.35</td>
</tr>
<tr class="row-odd"><td>MySQL</td>
<td>&gt;= 5.1.73</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dependent-software">
<h2>Dependent software<a class="headerlink" href="#dependent-software" title="Permalink to this headline">¶</a></h2>
<p>The following table describes the dependent software:</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Software</th>
<th class="head">Version</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Apache</td>
<td>2.2</td>
</tr>
<tr class="row-odd"><td>GnuTLS</td>
<td>&gt;= 2.0</td>
</tr>
<tr class="row-even"><td>Net-SNMP</td>
<td>5.5</td>
</tr>
<tr class="row-odd"><td>openssl</td>
<td>&gt;= 1.0.1e</td>
</tr>
<tr class="row-even"><td>PHP</td>
<td>&gt;= 5.3.0</td>
</tr>
<tr class="row-odd"><td>Qt</td>
<td>&gt;= 4.7.4</td>
</tr>
<tr class="row-even"><td>RRDtools</td>
<td>1.4.7</td>
</tr>
<tr class="row-odd"><td>zlib</td>
<td>1.2.3</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="backup">
<h2>Backup<a class="headerlink" href="#backup" title="Permalink to this headline">¶</a></h2>
<p>Be sure that you have fully backup of your environment for all the following server :</p>
<blockquote>
<div><ul class="simple">
<li>Central server</li>
<li>Database server</li>
<li>Reporting Centreon MBI server</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="centreon-repository-upgrade">
<h2>Centreon repository upgrade<a class="headerlink" href="#centreon-repository-upgrade" title="Permalink to this headline">¶</a></h2>
<p>If you are already a Centreon ISO user, you need to update your Centreon .repo file to
get software that is part of Centreon 3.4 (namely Centreon Web 2.8 and
associated components). Run the commands for your operating system.</p>
<div class="section" id="centos-6">
<h3>CentOS 6<a class="headerlink" href="#centos-6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rm -f /etc/yum.repos.d/ces-standard.repo /etc/yum.repos.d/centreon-stable.repo
$ wget http://yum.centreon.com/standard/3.4/el6/stable/noarch/RPMS/centreon-release-3.4-4.el6.noarch.rpm
$ yum install --nogpgcheck centreon-release-3.4-4.el6.noarch.rpm
</pre></div>
</div>
</div>
<div class="section" id="centos-7">
<h3>CentOS 7<a class="headerlink" href="#centos-7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rm -f /etc/yum.repos.d/ces-standard.repo /etc/yum.repos.d/centreon-stable.repo
$ wget http://yum.centreon.com/standard/3.4/el7/stable/noarch/RPMS/centreon-release-3.4-4.el7.centos.noarch.rpm
$ yum install --nogpgcheck centreon-release-3.4-4.el7.centos.noarch.rpm
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you’re using Centreon modules Centreon BAM, Centreon MAP4, CentreonMBI or Centreon EPP please contact our Support to have the new repo of each module.</p>
</div>
</div>
</div>
<div class="section" id="core-components-upgrade">
<h2>Core components upgrade<a class="headerlink" href="#core-components-upgrade" title="Permalink to this headline">¶</a></h2>
<div class="section" id="stop-centreon-components">
<h3>Stop Centreon components<a class="headerlink" href="#stop-centreon-components" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before to start the update, check if you don’t have any Centreon-Broker retention files.</p>
</div>
<p>Stop Centreon Broker and Centreon Engine on <strong>all poller</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># service centengine stop</span>
<span class="c1"># service cbd stop</span>
</pre></div>
</div>
</div>
<div class="section" id="update-components">
<h3>Update components<a class="headerlink" href="#update-components" title="Permalink to this headline">¶</a></h3>
<p>In order to update the Centreon monitoring interface, simply run the following command:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># yum update centreon</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you encounter dependency problems with centreon-engine-webservices, please remove this RPM that is now deprecated. Run the following line:
# yum remove centreon-engine-webservices</p>
</div>
<p>If you come from Centreon 2.7.0-RC2, in order to avoid the rpm naming problem please launch the following command line:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># yum downgrade centreon-2.7.0 centreon-plugins-2.7.0 centreon-base-config-centreon-engine-2.7.0 centreon-plugin-meta-2.7.0 centreon-common-2.7.0 centreon-web-2.7.0 centreon-trap-2.7.0 centreon-perl-libs-2.7.0</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="restart-web-server">
<h3>Restart web server<a class="headerlink" href="#restart-web-server" title="Permalink to this headline">¶</a></h3>
<p>Due to the installation of PHP-intl it is necessary to restart the Apache web server
to load new extension.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># service httpd restart</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="update-poller">
<h3>Update poller<a class="headerlink" href="#update-poller" title="Permalink to this headline">¶</a></h3>
<p>Repeat this procedure on all your poller :</p>
<blockquote>
<div><ul class="simple">
<li>Update repo</li>
<li>Update packets</li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You must have on all your environment (Central and Poller) the same version of Centreon Engine 1.7 and Centreon Broker 3.0.</p>
</div>
</div>
<div class="section" id="conclude-update-via-centreon-web-interface">
<h3>Conclude update via Centreon web interface<a class="headerlink" href="#conclude-update-via-centreon-web-interface" title="Permalink to this headline">¶</a></h3>
<p>Connect to your Centreon web interface and follow instructions to update Centreon’s databases. During this process a new configuration file will be created.</p>
<div class="section" id="presentation">
<h4>Presentation<a class="headerlink" href="#presentation" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/step01.png" class="align-center" src="../_images/step01.png" />
</div>
<div class="section" id="check-dependencies">
<h4>Check dependencies<a class="headerlink" href="#check-dependencies" title="Permalink to this headline">¶</a></h4>
<p>This step checks the dependencies on php modules.</p>
<img alt="../_images/step02.png" class="align-center" src="../_images/step02.png" />
</div>
<div class="section" id="release-notes">
<h4>Release notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/step03.png" class="align-center" src="../_images/step03.png" />
</div>
<div class="section" id="upgrade-the-database">
<h4>Upgrade the database<a class="headerlink" href="#upgrade-the-database" title="Permalink to this headline">¶</a></h4>
<p>This step upgrades database model and data, version by version.</p>
<img alt="../_images/step04.png" class="align-center" src="../_images/step04.png" />
</div>
<div class="section" id="finish">
<h4>Finish<a class="headerlink" href="#finish" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/step05.png" class="align-center" src="../_images/step05.png" />
</div>
</div>
<div class="section" id="generate-and-export-configuration-to-all-poller">
<h3>Generate and export configuration to all poller<a class="headerlink" href="#generate-and-export-configuration-to-all-poller" title="Permalink to this headline">¶</a></h3>
<p>To conclude the installation it is necessary to generate Centreon Engine and
Centreon Broker configuration. To perform this operation go to <strong>Configuration &gt; Poller</strong>
menu and click on the generate configuration icon.</p>
</div>
<div class="section" id="restart-all-centreon-components-on-all-poller">
<h3>Restart all Centreon components on all poller<a class="headerlink" href="#restart-all-centreon-components-on-all-poller" title="Permalink to this headline">¶</a></h3>
<p>Start Centreon Broker and Centreon Engine on <strong>all poller</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># service centengine start</span>
<span class="c1"># service cbd start</span>
</pre></div>
</div>
<p>Then, if all is ok, go on the Centreon interface and log out and follow the steps :</p>
</div>
</div>
<div class="section" id="ems-epp-upgrade">
<h2>EMS/EPP upgrade<a class="headerlink" href="#ems-epp-upgrade" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not a EMS/EPP user ? You might still find Centreon Plugin Packs very
useful to configure your monitoring system in minutes. You will find
installation guidance in the <a class="reference internal" href="../installation/from_iso.html#installation-ppm"><span class="std std-ref">online documentation</span></a>.</p>
</div>
<p>If you use additional Centreon modules you might need to update them too,
for them to work properly with your new Centreon version. This is
particularly true for EMS/EPP users.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In this case you need to contact our Support that will give you the link to set up the new repo for each module.
If you’re using Centreon BAM, you must have the great repo to upgrade your Centreon.
The following option should not be used :
# –skip-broken</p>
</div>
<div class="section" id="repository-update">
<h3>Repository update<a class="headerlink" href="#repository-update" title="Permalink to this headline">¶</a></h3>
<p>Just like for Centreon ISO, the .repo file needs to be updated to use the 3.4
release. Please ask Centreon support team if you do not know how to
perform this operation.</p>
</div>
<div class="section" id="package-update">
<h3>Package update<a class="headerlink" href="#package-update" title="Permalink to this headline">¶</a></h3>
<p>Run the following command on your central server to update Centreon
Plugin Pack Manager, the Plugin Packs and their associated plugins.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># yum update centreon-pp-manager ces-plugins-* ces-pack-*</span>
</pre></div>
</div>
<p>You will also need to run the following command on every poller using
the Plugin Packs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># yum update ces-plugins-*</span>
</pre></div>
</div>
</div>
<div class="section" id="web-update">
<h3>Web update<a class="headerlink" href="#web-update" title="Permalink to this headline">¶</a></h3>
<p>You now need to run the web update manually. For this purpose, go to
Administration -&gt; Extensions -&gt; Modules.</p>
<img alt="../_images/ppm_11.png" class="align-center" src="../_images/ppm_11.png" />
<p>Install Centreon License Manager (PPM dependency) and update Centreon
Plugin Pack Manager.</p>
<img alt="../_images/ppm_21.png" class="align-center" src="../_images/ppm_21.png" />
<p>Good, your module is working again !</p>
</div>
</div>
<div class="section" id="the-identified-risks-during-update">
<h2>The identified risks during update<a class="headerlink" href="#the-identified-risks-during-update" title="Permalink to this headline">¶</a></h2>
<p>To reduce risks and issues during update to Centreon Web 2.8 linked to Centreon
Engine 1.6 and Centreon Broker 3.0 we shared to you a list of known issues.
Please check this points during and after your upgrade.</p>
<div class="section" id="known-issues">
<h3>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Dependency issue between Centreon Engine and Centreon Broker because this two components (Centreon Broker 3.0 and Centreon Engine 1.8) are prerequisites for Centreon Web 2.8</li>
<li>Update databases global schema issue</li>
<li>Scales in peformance graphs display too many steps</li>
<li>PHP Warning issues when user access to performance graphs menu in Centreon Web</li>
<li>When you zoom on a graph the zoom is applied for all graphs</li>
<li>You can’t cancel zoom</li>
<li>CSV export doesn’t work for eventlogs</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">From Packages</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#dependent-software">Dependent software</a></li>
<li><a class="reference internal" href="#backup">Backup</a></li>
<li><a class="reference internal" href="#centreon-repository-upgrade">Centreon repository upgrade</a><ul>
<li><a class="reference internal" href="#centos-6">CentOS 6</a></li>
<li><a class="reference internal" href="#centos-7">CentOS 7</a></li>
</ul>
</li>
<li><a class="reference internal" href="#core-components-upgrade">Core components upgrade</a><ul>
<li><a class="reference internal" href="#stop-centreon-components">Stop Centreon components</a></li>
<li><a class="reference internal" href="#update-components">Update components</a></li>
<li><a class="reference internal" href="#restart-web-server">Restart web server</a></li>
<li><a class="reference internal" href="#update-poller">Update poller</a></li>
<li><a class="reference internal" href="#conclude-update-via-centreon-web-interface">Conclude update via Centreon web interface</a><ul>
<li><a class="reference internal" href="#presentation">Presentation</a></li>
<li><a class="reference internal" href="#check-dependencies">Check dependencies</a></li>
<li><a class="reference internal" href="#release-notes">Release notes</a></li>
<li><a class="reference internal" href="#upgrade-the-database">Upgrade the database</a></li>
<li><a class="reference internal" href="#finish">Finish</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-and-export-configuration-to-all-poller">Generate and export configuration to all poller</a></li>
<li><a class="reference internal" href="#restart-all-centreon-components-on-all-poller">Restart all Centreon components on all poller</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ems-epp-upgrade">EMS/EPP upgrade</a><ul>
<li><a class="reference internal" href="#repository-update">Repository update</a></li>
<li><a class="reference internal" href="#package-update">Package update</a></li>
<li><a class="reference internal" href="#web-update">Web update</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-identified-risks-during-update">The identified risks during update</a><ul>
<li><a class="reference internal" href="#known-issues">Known issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Upgrade</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="from_sources.html"
                        title="next chapter">From sources</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/upgrade/from_packages.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="from_sources.html" title="From sources"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Upgrade"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Centreon 2.8.16 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Upgrade</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2018 Centreon.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>